---
layout: post
title: Using quilt to apply series of patches
date: '2011-07-24T04:11:00.000+05:00'
author: Abbas Raza
tags:
- patches linux
- quilt
modified_time: '2013-01-17T19:36:24.734+05:00'
blogger_id: tag:blogger.com,1999:blog-3367966882409306161.post-8544211026555856271
blogger_orig_url: https://abbas-raza.blogspot.com/2011/07/using-quilt-to-apply-series-of-patches.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">Quilt&nbsp; is&nbsp; a&nbsp; tool to manage large sets of patches by keeping track of the changes each patch makes. Patches can be applied, un-applied, refreshed, etc.</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"><br /></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"><b>Example:</b></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><br /></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">Lets apply LTTng patches to linux kernel using quilt...</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"><br /></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">1) install quilt on ubuntu</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><br /></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">2) Copy LTTng patches downloaded before to linux kernel directory as directory 'patches'</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"># </span><span style="font-size: small;">cp -r /home/abbas/Downloads/patch-2.6.38.6-lttng-0.249 </span><span style="font-size: small;">/home/abbas/work/kernels/linux-2.6.38.6/patches</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><br /></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">3)</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"># cd /home/abbas/work/kernels/linux-2.6.38.6</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"><br />4) Copy series file to current directory </span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"># cp patches/series . </span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"><br /></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">5) Finally apply quilt command to apply all patches in series file&nbsp;</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"># quilt push -a</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"><br />You will see output like this ..&nbsp;</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"> </span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">abbas@dell-ubuntu:~/work/kernels/linux-2.6.38.6$ quilt push -a<br />Applying patch kernel-fix/kernel-irq-fix-kstat_irqs_cpu-and-irq_to_desc-symbols.patch<br />patching file include/linux/irqnr.h<br /><br />Applying patch nmi-safe-kernel/x86-nmi-safe-int3-and-page-fault.patch<br />patching file arch/x86/kernel/entry_32.S<br />patching file arch/x86/kernel/entry_64.S<br />patching file arch/x86/include/asm/irqflags.h<br />patching file arch/alpha/include/asm/thread_info.h<br />patching file arch/avr32/include/asm/thread_info.h<br />patching file arch/x86/include/asm/paravirt.h<br />patching file arch/x86/kernel/paravirt.c<br />patching file arch/x86/kernel/paravirt_patch_32.c<br /></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">If you face any problem while applying patches.. then use command</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"># quilt push -av --trace</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">It will give you internal view of quilt for debugging.</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><br /></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;"><b>Note:</b> Before&nbsp; a&nbsp; patch is applied (or ``pushed on the stack''), copies of all files the patch modifies are saved to the .pc/patch directory. The patch is added to the list of currently applied patches (.pc/applied-patches). Later when a patch is regenerated (quilt refresh), the backup copies in .pc/patch are&nbsp; compared with the current versions of the files in the source tree using GNU diff.<br /></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace; text-align: left;"><span style="font-size: small;">For more info 'man quilt'</span></div><div style="text-align: left;"><div style="font-family: 'Courier New', Courier, monospace;"><span style="font-size: small;"><br /></span></div><div style="font-family: 'Courier New', Courier, monospace;"><span style="font-size: small;">~~~~~~~~~~~</span></div><div style="font-family: 'Courier New', Courier, monospace;"><span style="font-size: small;">More Info:</span></div><div style="font-family: 'Courier New', Courier, monospace;">~~~~~~~~~~~</div><div style="font-family: 'Courier New', Courier, monospace;"><br /></div><span style="font-size: small;"></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">~: cat series</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">0001....<dot>patch</dot></span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">0002...<dot>patch</dot></span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">..</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">..</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">..</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">..</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">0054...<dot>patch</dot></span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">~: ls patches</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">all patches 0001--&gt;0054</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">Now apply via quilt</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">abbas@abbas:git$ cp /home/abbas/Desktop/Downloaded/patches/ . -r</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">abbas@abbas:git$ cp /home/abbas/Desktop/Downloaded/series .&nbsp;</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">abbas@abbas:git$ quilt push -a</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">Applying patch 0001-pwm-Make-appropriate-changes-in-drivers-Kconfig-for-.patch</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/Kconfig</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">Applying patch 0002-pwm-Add-PWM-framework-support.patch</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file Documentation/pwm.txt</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file MAINTAINERS</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/Kconfig</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/Makefile</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/pwm/Kconfig</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/pwm/Makefile</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/pwm/core.c</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file include/linux/pwm.h</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">Applying patch 0003-pwm-Allow-chips-to-support-multiple-PWMs.patch</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file Documentation/pwm.txt</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/pwm/core.c</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file include/linux/pwm.h</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">Applying patch 0053-pwm-Export-of_pwm_xlate_with_flags.patch</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/pwm/core.c</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">Applying patch 0054-pwm-i.MX-eliminate-build-warning.patch</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">patching file drivers/pwm/pwm-imx.c</span></span><br /><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span><span style="font-size: small;"><span style="font-family: 'Courier New', Courier, monospace;">Now at patch 0054-pwm-i.MX-eliminate-build-warning.patch</span></span><br /><div style="font-family: 'Courier New', Courier, monospace;"><span style="font-size: small;"><br /></span></div></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: small;"><br /></span></div></div>