---
layout: post
title: MYSQL Learning
date: '2018-08-28T07:44:00.002+05:00'
author: Abbas Raza
tags: 
modified_time: '2018-08-28T07:49:01.383+05:00'
blogger_id: tag:blogger.com,1999:blog-3367966882409306161.post-434234304251474963
blogger_orig_url: https://abbas-raza.blogspot.com/2018/08/mysql-learning.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Helvetica Neue'; color: #454545} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Helvetica Neue'; color: #454545; min-height: 14.0px} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px} table.t1 {border-collapse: collapse} td.td1 {border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #aaaaaa #aaaaaa #aaaaaa #aaaaaa; padding: 1.0px 5.0px 1.0px 5.0px} </style>  <br /><div class="p1">MYSQL notes:</div><div class="p1">===========</div><div class="p2"><br /></div><div class="p1">group by a column. group clause will make groups of filtered data based on column we given to it. after that select will run. select is supposed to select only 1 row from each group.<span class="Apple-converted-space">&nbsp;</span></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">BIO table:</div><table cellpadding="0" cellspacing="0" class="t1"><tbody><tr><td class="td1" valign="top"><div class="p1">name</div></td><td class="td1" valign="top"><div class="p1">cast</div></td><td class="td1" valign="top"><div class="p1">age</div></td></tr><tr><td class="td1" valign="top"><div class="p1">Abbas</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">31</div></td></tr><tr><td class="td1" valign="top"><div class="p1">sajjad</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">32</div></td></tr><tr><td class="td1" valign="top"><div class="p1">najam</div></td><td class="td1" valign="top"><div class="p1">abidi</div></td><td class="td1" valign="top"><div class="p1">33</div></td></tr><tr><td class="td1" valign="top"><div class="p1">mustafa</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">2</div></td></tr><tr><td class="td1" valign="top"><div class="p1">kumail</div></td><td class="td1" valign="top"><div class="p1">mehdi</div></td><td class="td1" valign="top"><div class="p1">21</div></td></tr></tbody></table><div class="p2"><br /></div><div class="p1"><b><span style="color: blue;">stmt1:</span></b></div><div class="p1"><b><span style="color: blue;">select MAX(age), cast from BIO group by cast;</span></b></div><div class="p2"><br /></div><table cellpadding="0" cellspacing="0" class="t1"><tbody><tr><td class="td1" valign="top"><div class="p1">age</div></td><td class="td1" valign="top"><div class="p1">cast</div></td></tr><tr><td class="td1" valign="top"><div class="p1">32</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td></tr><tr><td class="td1" valign="top"><div class="p1">33</div></td><td class="td1" valign="top"><div class="p1">abidi</div></td></tr><tr><td class="td1" valign="top"><div class="p1">21</div></td><td class="td1" valign="top"><div class="p1">mehdi</div></td></tr></tbody></table><div class="p2"><br /></div><div class="p1"><span style="color: blue;"><b>stmt2:</b></span></div><div class="p1"><span style="color: blue;"><b>select MAX(age), cast, name from BIO group by cast;</b></span></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">stmt2 will fail to execute because, name field is not present in group by clause.<span class="Apple-converted-space">&nbsp; </span>(assuming sql_mode=only_full_group_by is set)</div><div class="p2"><br /></div><div class="p1">Expression #3 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'learning.Bio.name' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">group by clause will make 3 groups like this:</div><div class="p2"><br /></div><div class="p1">group1:</div><table cellpadding="0" cellspacing="0" class="t1"><tbody><tr><td class="td1" valign="top"><div class="p1">Abbas</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">31</div></td></tr><tr><td class="td1" valign="top"><div class="p1">sajjad</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">32</div></td></tr><tr><td class="td1" valign="top"><div class="p1">mustafa</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">2</div></td></tr></tbody></table><div class="p2"><br /></div><div class="p1">group2:</div><table cellpadding="0" cellspacing="0" class="t1"><tbody><tr><td class="td1" valign="top"><div class="p1">najam</div></td><td class="td1" valign="top"><div class="p1">abidi</div></td><td class="td1" valign="top"><div class="p1">33</div></td></tr></tbody></table><div class="p2"><br /></div><div class="p1">group3:</div><table cellpadding="0" cellspacing="0" class="t1"><tbody><tr><td class="td1" valign="top"><div class="p1">kumail</div></td><td class="td1" valign="top"><div class="p1">mehdi</div></td><td class="td1" valign="top"><div class="p1">21</div></td></tr></tbody></table><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">now from each group, it needs to select only 1 row. so...from group1, which row will stmt2 select??? confused??</div><div class="p1">on age it applies aggregation. so MAX = 32. cast is zaidi for all rows. so<span class="Apple-converted-space">&nbsp;</span></div><div class="p2"><br /></div><div class="p2"><br /></div><table cellpadding="0" cellspacing="0" class="t1"><tbody><tr><td class="td1" valign="top"><div class="p1">name</div></td><td class="td1" valign="top"><div class="p1">cast</div></td><td class="td1" valign="top"><div class="p1">MAX(age)</div></td></tr><tr><td class="td1" valign="top"><div class="p3"><br /></div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">32</div></td></tr></tbody></table><div class="p2"><br /></div><div class="p1">but what about name? which name it will select??? there is problem. we can't use name in select because name is not in group by clause.</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">either we need to do<span class="Apple-converted-space">&nbsp;</span></div><div class="p1">&gt;&gt; grouping based on name and cast both</div><div class="p1">&gt;&gt; or we need to select arbitrary name from each group</div><div class="p1">&gt;&gt; or we need to disable only_full_group_by sql_mode in mysql db.</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1"><span style="color: blue;"><b>stmt3:</b></span></div><div class="p1"><span style="color: blue;"><b>select MAX(age), cast, ANY_VALUE(name) from Bio group by cast;</b></span></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p2"><br /></div><table cellpadding="0" cellspacing="0" class="t1"><tbody><tr><td class="td1" valign="top"><div class="p1">MAX(age)</div></td><td class="td1" valign="top"><div class="p1">cast</div></td><td class="td1" valign="top"><div class="p1">ANY_VALUE(name)</div></td></tr><tr><td class="td1" valign="top"><div class="p1">32</div></td><td class="td1" valign="top"><div class="p1">zaidi</div></td><td class="td1" valign="top"><div class="p1">abbas</div></td></tr><tr><td class="td1" valign="top"><div class="p1">33</div></td><td class="td1" valign="top"><div class="p1">abidi</div></td><td class="td1" valign="top"><div class="p1">najam</div></td></tr><tr><td class="td1" valign="top"><div class="p1">21</div></td><td class="td1" valign="top"><div class="p1">mehdi</div></td><td class="td1" valign="top"><div class="p1">kumail</div></td></tr></tbody></table><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">which is wrong. abbas's age is 31.</div><div class="p2"><br /></div><div class="p1">so stmt3 has chosen an arbitrary value of name no matter its wrong.</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">now lets disable only_full_group_by in sql_mode and run stmt2 again: this time it runs.<span class="Apple-converted-space">&nbsp;</span></div><div class="p2"><br /></div><div class="p1">but gives same result as result of stmt3 .<span class="Apple-converted-space">&nbsp;</span></div><div class="p1">conclusion: by disabling only_full_group_by, we get same result as when used ANY_VALUE(name) .</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p2"><br /></div><br /></div>