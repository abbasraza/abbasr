---
layout: post
title: kernel tracing and debugging methods
date: '2014-01-16T18:43:00.002+05:00'
author: Abbas Raza
tags: 
modified_time: '2014-01-16T18:43:52.388+05:00'
blogger_id: tag:blogger.com,1999:blog-3367966882409306161.post-751232450582637783
blogger_orig_url: https://abbas-raza.blogspot.com/2014/01/kernel-tracing-and-debugging-methods.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><br /><h1 class="firstHeading" id="firstHeading" lang="en"><span dir="auto">Kernel Trace Systems</span></h1><div id="bodyContent">                 <div id="contentSub"></div><div class="mw-jump" id="jump-to-nav">     Jump to:     <a href="http://elinux.org/Kernel_Trace_Systems#mw-navigation">navigation</a>,      <a href="http://elinux.org/Kernel_Trace_Systems#p-search">search</a>    </div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">Here are some links to information about different kernel tracing systems: <br /> <div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div><ul><li class="toclevel-1 tocsection-1"><a href="http://elinux.org/Kernel_Trace_Systems#General_Purpose_tracing_systems"><span class="tocnumber">1</span> <span class="toctext">General Purpose tracing systems</span></a></li><li class="toclevel-1 tocsection-2"><a href="http://elinux.org/Kernel_Trace_Systems#Special_Purpose_tracing_systems"><span class="tocnumber">2</span> <span class="toctext">Special Purpose tracing systems</span></a></li><li class="toclevel-1 tocsection-3"><a href="http://elinux.org/Kernel_Trace_Systems#Trace_Infrastructure"><span class="tocnumber">3</span> <span class="toctext">Trace Infrastructure</span></a></li><li class="toclevel-1 tocsection-4"><a href="http://elinux.org/Kernel_Trace_Systems#Sampling_Systems"><span class="tocnumber">4</span> <span class="toctext">Sampling Systems</span></a></li><li class="toclevel-1 tocsection-5"><a href="http://elinux.org/Kernel_Trace_Systems#Related_facilities"><span class="tocnumber">5</span> <span class="toctext">Related facilities</span></a></li><li class="toclevel-1 tocsection-6"><a href="http://elinux.org/Kernel_Trace_Systems#Other_Systems"><span class="tocnumber">6</span> <span class="toctext">Other Systems</span></a></li><li class="toclevel-1 tocsection-7"><a href="http://elinux.org/Kernel_Trace_Systems#Collaboration_Efforts"><span class="tocnumber">7</span> <span class="toctext">Collaboration Efforts</span></a></li></ul></div><h2><span class="mw-headline" id="General_Purpose_tracing_systems">General Purpose tracing systems</span></h2>Some major Linux general-purpose tracing systems are: <br /> <ul><li>ptrace - ability to trace syscall entry and exit, and signal delivery, to a process (also used for debugging a process) <ul><li> see "man ptrace" and "man strace" </li></ul></li><li> <a href="http://elinux.org/Ftrace" title="Ftrace">Ftrace</a><ul><li> <a href="http://elinux.org/Ftrace_Function_Graph_ARM" title="Ftrace Function Graph ARM">Ftrace Function Graph ARM</a> - presentations and patches by Tim Bird to add function graph and duration tracing to ARM systems <ul><li> The presentation has good introductory material on ftrace, as well as links to additional resources </li></ul></li><li> tracer for kernel functions </li><li> can also be used for debugging or analyzing latencies and performance issues </li><li> in mainline since 2.6.27 </li><li> See <a href="http://elinux.org/Measuring_Function_Duration_with_FTrace" title="Measuring Function Duration with FTrace">Measuring Function Duration with FTrace</a> - outline of presentation by Tim Bird for Linux Symposium 2009 </li></ul></li><li> <a href="http://elinux.org/System_Tap" title="System Tap">System Tap</a> - System Tap is a system for building and executing tracing and sampling systems that can be applied to a running Linux system </li><li>LTTng - <a href="http://elinux.org/Linux_Trace_Toolkit" title="Linux Trace Toolkit">Linux Trace Toolkit</a>, next generation </li><li>LKST - <a href="http://elinux.org/Linux_Kernel_State_Tracer" title="Linux Kernel State Tracer">Linux Kernel State Tracer</a></li></ul><h2><span class="mw-headline" id="Special_Purpose_tracing_systems">Special Purpose tracing systems</span></h2>There are some other notable special-purpose kernel tracing systems: <br /> <ul><li> KFT - <a href="http://elinux.org/Kernel_Function_Trace" title="Kernel Function Trace">Kernel Function Trace</a> - traces functions to show function durations and call graphs </li><li>latency trace - RT-preempt tool for measuring interrupt and mutex latency <ul><li>The latency tracer is embedded in the RT-preempt patch - see <a href="http://elinux.org/Realtime_Preemption" title="Realtime Preemption">Realtime Preemption</a> and <a class="external text" href="http://lwn.net/Articles/97811/" rel="nofollow">RT-preempt Article</a></li></ul></li><li>block tracer (blktrace) - allows you to see exactly what is going on in the block layer for a given queue <ul><li>Introduction by Jens Axboe: <a class="external text" href="http://lwn.net/Articles/148761/" rel="nofollow">Introduction</a></li><li>Execellent presentation: <a class="external text" href="http://www.gelato.org/pdf/apr2006/gelato_ICE06apr_blktrace_brunelle_hp.pdf" rel="nofollow">blktrace.pdf</a></li><li>Guide to using is at: <a class="external text" href="https://secure.engr.oregonstate.edu/wiki/CS411/index.php/Blktrace_Guide" rel="nofollow">blktrace guide</a></li><li>This appears to have been mainlined as of 2.6.17 </li><li>Timeline utility (blktrace post-processing tool): <a class="external text" href="http://www.nabble.com/NEW%3A-btt---blktrace-timeline-utility%3A-analyze-I-Os-collected-with-blktrace.-tf1644874.html" rel="nofollow">blktrace timeline utility</a></li></ul></li><li> delay accounting patches - collect statistics about the delays that are experienced by each task on the system <ul><li> see <a class="external text" href="http://lkml.org/lkml/2006/5/2/30" rel="nofollow">delay accounting patches</a></li></ul></li></ul><h2><span class="mw-headline" id="Trace_Infrastructure">Trace Infrastructure</span></h2><ul><li>KProbes - grew out of dprobes, with information at: <a class="external text" href="http://dprobes.sourceforge.net/" rel="nofollow">dprobes</a><ul><li>see an excellent tutorial at: <a class="external text" href="http://www-users.cs.umn.edu/~boutcher/kprobes/" rel="nofollow">kprobes</a></li><li>The mainline version of the KProbes supports x86,Alpha and PPC64  architectures. A MIPS implementation has been completed on the 2.6.16  kernel and tested on the Toshiba TX49 platform. Patch is available in  the <a href="http://elinux.org/Patch_Archive" title="Patch Archive">Patch Archive</a>. </li></ul></li></ul><ul><li> [would be nice to have some djprobe stuff here] </li></ul><h2><span class="mw-headline" id="Sampling_Systems">Sampling Systems</span></h2>Note that profile systems (or "sampling systems") are slightly  different, in that they involve sampling instead of event tracing.  Some  major ones for Linux are: <br /> <ul><li> top - provides a dynamic real-time view of a running system, including processes <ul><li> see "man top" </li><li> see also ksysguard, <a class="external text" href="http://freshmeat.net/projects/gnome-system-monitor/" rel="nofollow">Gnome system Monitor</a></li></ul></li><li> OProfile - system-wide profiler for Linux systems <ul><li> see <a class="external text" href="http://oprofile.sourceforge.net/about/" rel="nofollow">oprofile</a></li><li> also: <a class="external text" href="http://www-128.ibm.com/developerworks/linux/library/l-oprof.html" rel="nofollow">oprofile at IBM</a></li></ul></li><li> BootChart - samples bootup and provides visualization of process startup and system utilization <ul><li> see <a href="http://elinux.org/Bootchart" title="Bootchart">Bootchart</a></li></ul></li></ul><h2><span class="mw-headline" id="Related_facilities">Related facilities</span></h2><ul><li> in-kernel statistics infrastructure - proposal for a generic implementation of statistics facilities inside the kernel <ul><li> see <a class="external text" href="http://lkml.org/lkml/2006/5/19/106" rel="nofollow">inkernel stats</a></li></ul></li><li> perfmon2 - interfaces to hardware performance monitoring features of the CPU <ul><li> see <a class="external text" href="http://perfmon2.sourceforge.net/" rel="nofollow">perfmon</a></li></ul></li><li> inotify - <a class="external text" href="http://www-128.ibm.com/developerworks/linux/library/l-inotify.html" rel="nofollow">inotify</a></li></ul><h2><span class="mw-headline" id="Other_Systems">Other Systems</span></h2>Here are some systems I haven't classified yet: <br /> <ul><li> Datastreams - a system for creating and monitoring tracepoints - see <a class="external text" href="http://kusp.ittc.ku.edu/wiki/index.php/Main_Page" rel="nofollow">datastreams</a></li></ul><h2><span class="mw-headline" id="Collaboration_Efforts">Collaboration Efforts</span></h2>Some trace system project leaders are trying to collaborate: see <a href="http://elinux.org/Tracing_Collaboration_Project" title="Tracing Collaboration Project">Tracing Collaboration Project</a></div></div></div>