---
layout: post
title: Using mmc_test driver (Debugfs interface)
date: '2012-11-18T20:34:00.000+05:00'
author: Abbas Raza
tags:
- unbind driver
- mmc_test
- debugfs
- mmc testing
modified_time: '2012-11-18T20:34:11.893+05:00'
blogger_id: tag:blogger.com,1999:blog-3367966882409306161.post-6785009814405769931
blogger_orig_url: https://abbas-raza.blogspot.com/2012/11/using-mmctest-driver-debugfs-interface.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~# echo mmc1:e624 &gt; /sys/bus/mmc/drivers/mmcblk/unbind&nbsp;</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~# insmod ./mmc_test.ko&nbsp;</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;155.522222] In mmc_test Probe</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;155.525226] In mmc_test Probe Created debugfs</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;155.529596] mmc_test mmc1:e624: &gt;Card claimed for testing.</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~# mount -t debugfs none /sys/kernel/debug/</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~# cat /sys/kernel/debug/mmc1/mmc1\:e624/test</span><br /><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~#&nbsp;</span><br /><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~# cat /sys/kernel/debug/mmc1/mmc1\:e624/testlist&nbsp;</span><br /><span style="font-family: 'Courier New', Courier, monospace;">1: &nbsp; &nbsp; &nbsp;Basic write (no data verification)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">2: &nbsp; &nbsp; &nbsp;Basic read (no data verification)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">3: &nbsp; &nbsp; &nbsp;Basic write (with data verification)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">4: &nbsp; &nbsp; &nbsp;Basic read (with data verification)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">5: &nbsp; &nbsp; &nbsp;Multi-block write</span><br /><span style="font-family: 'Courier New', Courier, monospace;">6: &nbsp; &nbsp; &nbsp;Multi-block read</span><br /><span style="font-family: 'Courier New', Courier, monospace;">7: &nbsp; &nbsp; &nbsp;Power of two block writes</span><br /><span style="font-family: 'Courier New', Courier, monospace;">8: &nbsp; &nbsp; &nbsp;Power of two block reads</span><br /><span style="font-family: 'Courier New', Courier, monospace;">9: &nbsp; &nbsp; &nbsp;Weird sized block writes</span><br /><span style="font-family: 'Courier New', Courier, monospace;">10: &nbsp; &nbsp; Weird sized block reads</span><br /><span style="font-family: 'Courier New', Courier, monospace;">11: &nbsp; &nbsp; Badly aligned write</span><br /><span style="font-family: 'Courier New', Courier, monospace;">12: &nbsp; &nbsp; Badly aligned read</span><br /><span style="font-family: 'Courier New', Courier, monospace;">13: &nbsp; &nbsp; Badly aligned multi-block write</span><br /><span style="font-family: 'Courier New', Courier, monospace;">14: &nbsp; &nbsp; Badly aligned multi-block read</span><br /><span style="font-family: 'Courier New', Courier, monospace;">15: &nbsp; &nbsp; Correct xfer_size at write (start failure)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">16: &nbsp; &nbsp; Correct xfer_size at read (start failure)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">17: &nbsp; &nbsp; Correct xfer_size at write (midway failure)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">18: &nbsp; &nbsp; Correct xfer_size at read (midway failure)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">19: &nbsp; &nbsp; Highmem write</span><br /><span style="font-family: 'Courier New', Courier, monospace;">20: &nbsp; &nbsp; Highmem read</span><br /><span style="font-family: 'Courier New', Courier, monospace;">21: &nbsp; &nbsp; Multi-block highmem write</span><br /><span style="font-family: 'Courier New', Courier, monospace;">22: &nbsp; &nbsp; Multi-block highmem read</span><br /><span style="font-family: 'Courier New', Courier, monospace;">23: &nbsp; &nbsp; Best-case read performance</span><br /><span style="font-family: 'Courier New', Courier, monospace;">24: &nbsp; &nbsp; Best-case write performance</span><br /><span style="font-family: 'Courier New', Courier, monospace;">25: &nbsp; &nbsp; Best-case read performance into scattered pages</span><br /><span style="font-family: 'Courier New', Courier, monospace;">26: &nbsp; &nbsp; Best-case write performance from scattered pages</span><br /><span style="font-family: 'Courier New', Courier, monospace;">27: &nbsp; &nbsp; Single read performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">28: &nbsp; &nbsp; Single write performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">29: &nbsp; &nbsp; Single trim performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">30: &nbsp; &nbsp; Consecutive read performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">31: &nbsp; &nbsp; Consecutive write performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">32: &nbsp; &nbsp; Consecutive trim performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">33: &nbsp; &nbsp; Random read performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">34: &nbsp; &nbsp; Random write performance by transfer size</span><br /><span style="font-family: 'Courier New', Courier, monospace;">35: &nbsp; &nbsp; Large sequential read into scattered pages</span><br /><span style="font-family: 'Courier New', Courier, monospace;">36: &nbsp; &nbsp; Large sequential write from scattered pages</span><br /><span style="font-family: 'Courier New', Courier, monospace;">37: &nbsp; &nbsp; Write performance with blocking req 4k to 4MB</span><br /><span style="font-family: 'Courier New', Courier, monospace;">38: &nbsp; &nbsp; Write performance with non-blocking req 4k to 4MB</span><br /><span style="font-family: 'Courier New', Courier, monospace;">39: &nbsp; &nbsp; Read performance with blocking req 4k to 4MB</span><br /><span style="font-family: 'Courier New', Courier, monospace;">40: &nbsp; &nbsp; Read performance with non-blocking req 4k to 4MB</span><br /><span style="font-family: 'Courier New', Courier, monospace;">41: &nbsp; &nbsp; Write performance blocking req 1 to 512 sg elems</span><br /><span style="font-family: 'Courier New', Courier, monospace;">42: &nbsp; &nbsp; Write performance non-blocking req 1 to 512 sg elems</span><br /><span style="font-family: 'Courier New', Courier, monospace;">43: &nbsp; &nbsp; Read performance blocking req 1 to 512 sg elems</span><br /><span style="font-family: 'Courier New', Courier, monospace;">44: &nbsp; &nbsp; Read performance non-blocking req 1 to 512 sg elems</span><br /><span style="font-family: 'Courier New', Courier, monospace;">45: &nbsp; &nbsp; eMMC hardware reset</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~# echo 44 &gt; /sys/kernel/debug/mmc1/mmc1\:e624/test</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;363.310850] mmc1: Starting tests of card mmc1:e624...</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;363.315963] mmc1: Test case 44. Read performance non-blocking req 1 to 512 sg elems...</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;402.891842] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.567777851 seconds (3392 kB/s, 3312 KiB/s, 6.46 IOPS, sg_len 1)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;442.435896] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.531793604 seconds (3395 kB/s, 3315 KiB/s, 6.47 IOPS, sg_len 8)</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;481.966825] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.518701662 seconds (3396 kB/s, 3316 KiB/s, 6.47 IOPS, sg_len 16)</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;521.482591] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.499698115 seconds (3397 kB/s, 3318 KiB/s, 6.48 IOPS, sg_len 32)</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;561.012323] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.517424950 seconds (3396 kB/s, 3316 KiB/s, 6.47 IOPS, sg_len 64)</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;600.546146] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.521500027 seconds (3396 kB/s, 3316 KiB/s, 6.47 IOPS, sg_len 128)</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;640.076111] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.517560936 seconds (3396 kB/s, 3316 KiB/s, 6.47 IOPS, sg_len 128)</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;679.637508] mmc1: Transfer of 256 x 1024 sectors (256 x 512 KiB) took 39.548983893 seconds (3393 kB/s, 3314 KiB/s, 6.47 IOPS, sg_len 128)</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;679.649888] mmc1: Result: OK</span><br /><span style="font-family: 'Courier New', Courier, monospace;">[ &nbsp;679.652821] mmc1: Tests completed.</span><br /><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~#&nbsp;</span><br /><span style="font-family: 'Courier New', Courier, monospace;">root@fsl:~#&nbsp;</span><br /><div><br /></div></div>